<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>×¤× ×“×œ×™× - ×˜×•× FC âš½</title>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Heebo', sans-serif;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(180deg, #1a3a1a 0%, #2A5F2A 50%, #1a3a1a 100%);
            position: relative;
            user-select: none;
            -webkit-user-select: none;
        }

        /* ×“×©× ××¦×™××•×ª×™ */
        .field-pattern {
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    #2A5F2A 0px,
                    #2A5F2A 50px,
                    #245424 50px,
                    #245424 100px
                );
            opacity: 0.3;
            z-index: 1;
        }

        /* ×§×•×•×™× ×œ×‘× ×™× */
        .field-lines {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 2;
        }

        .penalty-spot {
            position: absolute;
            bottom: 15%;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .goal-line {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            width: 40%;
            height: 3px;
            background: rgba(255,255,255,0.5);
        }

        /* Header ××§×¦×•×¢×™ */
        .header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: linear-gradient(180deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #0066CC, #0099FF);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 4px 20px rgba(0,102,204,0.5);
        }

        .logo-text {
            color: white;
            font-size: 28px;
            font-weight: 900;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .score-display {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 20px;
            padding: 15px 30px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .score-label {
            color: rgba(255,255,255,0.8);
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .score-value {
            color: #D4AF37;
            font-size: 36px;
            font-weight: 900;
            text-shadow: 0 2px 10px rgba(212,175,55,0.5);
            min-width: 60px;
            text-align: center;
        }

        /* ×©×¢×¨ ××§×¦×•×¢×™ */
        .goal-container {
            position: absolute;
            top: 5%;
            left: 50%;
            transform: translateX(-50%);
            width: 50%;
            max-width: 600px;
            height: 35%;
            z-index: 10;
            perspective: 1000px;
        }

        .goal {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
        }

        .goal-post {
            position: absolute;
            background: white;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }

        .goal-post.left {
            left: 0;
            top: 0;
            width: 8px;
            height: 100%;
        }

        .goal-post.right {
            right: 0;
            top: 0;
            width: 8px;
            height: 100%;
        }

        .goal-post.top {
            left: 0;
            top: 0;
            width: 100%;
            height: 8px;
        }

        .goal-net {
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(0deg, transparent 48%, rgba(255,255,255,0.3) 49%, rgba(255,255,255,0.3) 51%, transparent 52%),
                linear-gradient(90deg, transparent 48%, rgba(255,255,255,0.3) 49%, rgba(255,255,255,0.3) 51%, transparent 52%);
            background-size: 40px 40px;
            opacity: 0.6;
        }

        /* ×©×•×¢×¨ ×¢× ×ª××•× ×ª ×˜×•× */
        .goalkeeper {
            position: absolute;
            bottom: 42%;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 160px;
            z-index: 20;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .goalkeeper-body {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .goalkeeper-shirt {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 90px;
            height: 100px;
            background: linear-gradient(135deg, #FF6B00, #FF8C00);
            border-radius: 15px 15px 5px 5px;
            box-shadow: 0 4px 20px rgba(255,107,0,0.4);
        }

        .goalkeeper-gloves {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #FFD700;
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(255,215,0,0.5);
        }

        .goalkeeper-gloves.left {
            left: -15px;
            top: 50%;
        }

        .goalkeeper-gloves.right {
            right: -15px;
            top: 50%;
        }

        .goalkeeper-head {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 70px;
            height: 70px;
            border-radius: 50%;
            overflow: hidden;
            border: 4px solid #FF6B00;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            background: #FFE0BD;
        }

        .goalkeeper-head img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .goalkeeper.jumping-left {
            animation: jumpLeft 0.6s ease-out;
        }

        .goalkeeper.jumping-right {
            animation: jumpRight 0.6s ease-out;
        }

        @keyframes jumpLeft {
            0% { transform: translateX(-50%) translateY(0) rotate(0deg); }
            50% { transform: translateX(-150%) translateY(-50px) rotate(-45deg); }
            100% { transform: translateX(-50%) translateY(0) rotate(0deg); }
        }

        @keyframes jumpRight {
            0% { transform: translateX(-50%) translateY(0) rotate(0deg); }
            50% { transform: translateX(50%) translateY(-50px) rotate(45deg); }
            100% { transform: translateX(-50%) translateY(0) rotate(0deg); }
        }

        /* ×›×“×•×¨ */
        .ball {
            position: absolute;
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            box-shadow: 
                0 5px 20px rgba(0,0,0,0.3),
                inset -5px -5px 10px rgba(0,0,0,0.2),
                inset 5px 5px 10px rgba(255,255,255,0.5);
            z-index: 15;
            transition: all 0.05s linear;
            bottom: 15%;
            left: 50%;
            transform: translateX(-50%);
        }

        .ball::before {
            content: 'âš½';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
        }

        /* ××“×™ ×‘×§×¨×” ×–×›×•×›×™×ª×™×™× */
        .controls {
            position: absolute;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 500px;
            z-index: 50;
        }

        .control-panel {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(30px);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 25px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            margin-bottom: 15px;
        }

        .control-label {
            color: white;
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }

        .meter-container {
            position: relative;
            width: 100%;
            height: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .meter-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: linear-gradient(90deg, #0066CC, #00AAFF);
            border-radius: 10px;
            transition: width 0.05s linear;
            box-shadow: 0 0 15px rgba(0,102,204,0.8);
        }

        .meter-indicator {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: white;
            border: 3px solid #0066CC;
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(0,102,204,0.8);
            transition: left 0.05s linear;
        }

        /* ×›×¤×ª×•×¨ ×‘×¢×™×˜×” */
        .kick-button {
            background: linear-gradient(135deg, #0066CC, #0099FF);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 20px 50px;
            font-size: 24px;
            font-weight: 900;
            cursor: pointer;
            box-shadow: 0 8px 32px rgba(0,102,204,0.5);
            transition: all 0.3s ease;
            font-family: 'Heebo', sans-serif;
            width: 100%;
            margin-top: 15px;
        }

        .kick-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0,102,204,0.7);
        }

        .kick-button:active {
            transform: translateY(0);
        }

        .kick-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ×”×•×“×¢×•×ª */
        .message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(20px);
            border: 3px solid white;
            border-radius: 30px;
            padding: 40px 60px;
            color: white;
            font-size: 32px;
            font-weight: 900;
            text-align: center;
            z-index: 200;
            box-shadow: 0 10px 50px rgba(0,0,0,0.5);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .message.show {
            opacity: 1;
        }

        .message.goal {
            border-color: #D4AF37;
            color: #D4AF37;
            text-shadow: 0 0 20px rgba(212,175,55,0.8);
        }

        .message.miss {
            border-color: #FF4444;
            color: #FF4444;
        }

        /* ×—×œ×§×™×§×™× */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 150;
        }

        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #D4AF37;
            border-radius: 50%;
            animation: particle-burst 1s ease-out forwards;
        }

        @keyframes particle-burst {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--x), var(--y)) scale(0);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                height: 60px;
                padding: 0 15px;
            }

            .logo-icon {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .logo-text {
                font-size: 20px;
            }

            .score-display {
                padding: 10px 20px;
                gap: 10px;
            }

            .score-value {
                font-size: 24px;
            }

            .goal-container {
                width: 70%;
            }

            .goalkeeper {
                width: 80px;
                height: 110px;
            }

            .goalkeeper-head {
                width: 50px;
                height: 50px;
            }

            .goalkeeper-shirt {
                width: 60px;
                height: 70px;
            }

            .message {
                font-size: 24px;
                padding: 30px 40px;
            }
        }

        /* Loading */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0066CC;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.5s ease;
        }

        .loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-ball {
            width: 80px;
            height: 80px;
            font-size: 60px;
            animation: bounce 0.6s infinite alternate;
        }

        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-40px); }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="loading-ball">âš½</div>
    </div>

    <!-- ×“×©× -->
    <div class="field-pattern"></div>
    <div class="field-lines">
        <div class="penalty-spot"></div>
        <div class="goal-line"></div>
    </div>

    <!-- Header -->
    <div class="header">
        <div class="logo">
            <div class="logo-icon">âš½</div>
            <div class="logo-text">×˜×•× FC</div>
        </div>
        <div class="score-display">
            <div>
                <div class="score-label">×’×•×œ×™×</div>
                <div class="score-value" id="goals">0</div>
            </div>
            <div style="width: 2px; height: 40px; background: rgba(255,255,255,0.3);"></div>
            <div>
                <div class="score-label">× ×™×¡×™×•× ×•×ª</div>
                <div class="score-value" id="attempts">5</div>
            </div>
        </div>
    </div>

    <!-- ×©×¢×¨ -->
    <div class="goal-container">
        <div class="goal">
            <div class="goal-net"></div>
            <div class="goal-post left"></div>
            <div class="goal-post right"></div>
            <div class="goal-post top"></div>
        </div>
    </div>

    <!-- ×©×•×¢×¨ -->
    <div class="goalkeeper" id="goalkeeper">
        <div class="goalkeeper-body">
            <div class="goalkeeper-head">
                <img src="tom-photo.jpg" alt="×˜×•×">
            </div>
            <div class="goalkeeper-shirt"></div>
            <div class="goalkeeper-gloves left"></div>
            <div class="goalkeeper-gloves right"></div>
        </div>
    </div>

    <!-- ×›×“×•×¨ -->
    <div class="ball" id="ball"></div>

    <!-- ×‘×§×¨×•×ª -->
    <div class="controls" id="controls">
        <div class="control-panel" id="directionPanel" style="display: none;">
            <div class="control-label">×›×™×•×•×Ÿ ××•×¤×§×™</div>
            <div class="meter-container">
                <div class="meter-fill" id="directionFill"></div>
                <div class="meter-indicator" id="directionIndicator"></div>
            </div>
        </div>
        <div class="control-panel" id="powerPanel" style="display: none;">
            <div class="control-label">×¢×•×¦××”</div>
            <div class="meter-container">
                <div class="meter-fill" id="powerFill"></div>
                <div class="meter-indicator" id="powerIndicator"></div>
            </div>
        </div>
        <button class="kick-button" id="kickButton">×‘×¢×™×˜×”! ğŸ¯</button>
    </div>

    <!-- ×”×•×“×¢×•×ª -->
    <div class="message" id="message"></div>

    <!-- ×—×œ×§×™×§×™× -->
    <div class="particles" id="particles"></div>

    <script>
        // Game State
        const game = {
            goals: 0,
            attempts: 5,
            phase: 'ready', // ready, direction, power, kicking
            direction: 0.5, // 0-1 (left to right)
            power: 0.5, // 0-1
            directionSpeed: 0.02,
            powerSpeed: 0.03,
            directionDirection: 1,
            powerDirection: 1,
            animationFrame: null
        };

        // Elements
        const elements = {
            ball: document.getElementById('ball'),
            goalkeeper: document.getElementById('goalkeeper'),
            kickButton: document.getElementById('kickButton'),
            directionPanel: document.getElementById('directionPanel'),
            powerPanel: document.getElementById('powerPanel'),
            directionFill: document.getElementById('directionFill'),
            powerFill: document.getElementById('powerFill'),
            directionIndicator: document.getElementById('directionIndicator'),
            powerIndicator: document.getElementById('powerIndicator'),
            message: document.getElementById('message'),
            particles: document.getElementById('particles'),
            goals: document.getElementById('goals'),
            attempts: document.getElementById('attempts'),
            loading: document.getElementById('loading'),
            controls: document.getElementById('controls')
        };

        // Initialize
        window.addEventListener('load', () => {
            setTimeout(() => {
                elements.loading.classList.add('hidden');
            }, 500);
        });

        // Sound Effects (Web Audio API)
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(frequency, duration, type = 'sine') {
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            
            oscillator.start(audioCtx.currentTime);
            oscillator.stop(audioCtx.currentTime + duration);
        }

        function playKickSound() {
            playSound(150, 0.1, 'square');
        }

        function playGoalSound() {
            playSound(800, 0.3, 'sine');
            setTimeout(() => playSound(1000, 0.3, 'sine'), 150);
            setTimeout(() => playSound(1200, 0.5, 'sine'), 300);
        }

        function playMissSound() {
            playSound(200, 0.5, 'sawtooth');
        }

        // Direction Meter Animation
        function animateDirection() {
            game.direction += game.directionSpeed * game.directionDirection;
            
            if (game.direction >= 1) {
                game.direction = 1;
                game.directionDirection = -1;
            } else if (game.direction <= 0) {
                game.direction = 0;
                game.directionDirection = 1;
            }
            
            updateDirectionMeter();
            
            if (game.phase === 'direction') {
                game.animationFrame = requestAnimationFrame(animateDirection);
            }
        }

        function updateDirectionMeter() {
            const percent = game.direction * 100;
            elements.directionFill.style.width = percent + '%';
            elements.directionIndicator.style.left = percent + '%';
        }

        // Power Meter Animation
        function animatePower() {
            game.power += game.powerSpeed * game.powerDirection;
            
            if (game.power >= 1) {
                game.power = 1;
                game.powerDirection = -1;
            } else if (game.power <= 0) {
                game.power = 0;
                game.powerDirection = 1;
            }
            
            updatePowerMeter();
            
            if (game.phase === 'power') {
                game.animationFrame = requestAnimationFrame(animatePower);
            }
        }

        function updatePowerMeter() {
            const percent = game.power * 100;
            elements.powerFill.style.width = percent + '%';
            elements.powerIndicator.style.left = percent + '%';
        }

        // Kick Button Handler
        elements.kickButton.addEventListener('click', handleKick);
        elements.kickButton.addEventListener('touchstart', (e) => {
            e.preventDefault();
            handleKick();
        });

        function handleKick() {
            if (game.phase === 'ready') {
                // Start direction phase
                game.phase = 'direction';
                elements.kickButton.textContent = '×§×‘×¢ ×›×™×•×•×Ÿ! â¬…ï¸â¡ï¸';
                elements.directionPanel.style.display = 'block';
                animateDirection();
                playSound(600, 0.1);
                
            } else if (game.phase === 'direction') {
                // Lock direction, start power phase
                cancelAnimationFrame(game.animationFrame);
                game.phase = 'power';
                elements.kickButton.textContent = '×¢×•×¦××”! ğŸ’ª';
                elements.powerPanel.style.display = 'block';
                animatePower();
                playSound(700, 0.1);
                
            } else if (game.phase === 'power') {
                // Lock power, execute kick
                cancelAnimationFrame(game.animationFrame);
                game.phase = 'kicking';
                elements.kickButton.disabled = true;
                executeKick();
            }
        }

        // Execute Kick
        function executeKick() {
            playKickSound();
            
            // Hide controls during kick
            elements.controls.style.opacity = '0';
            
            // Calculate target position
            const goalWidth = elements.goalkeeper.parentElement.offsetWidth;
            const targetX = (game.direction - 0.5) * goalWidth;
            
            // Goalkeeper decision (random with bias toward ball direction)
            const keeperChoice = Math.random();
            let keeperDirection = 'none';
            
            if (game.direction < 0.35) {
                keeperDirection = keeperChoice > 0.3 ? 'left' : 'right';
            } else if (game.direction > 0.65) {
                keeperDirection = keeperChoice > 0.3 ? 'right' : 'left';
            } else {
                keeperDirection = keeperChoice > 0.5 ? 'left' : 'right';
            }
            
            // Animate goalkeeper
            if (keeperDirection !== 'none') {
                setTimeout(() => {
                    elements.goalkeeper.classList.add('jumping-' + keeperDirection);
                    playSound(400, 0.2);
                }, 300);
                
                setTimeout(() => {
                    elements.goalkeeper.classList.remove('jumping-' + keeperDirection);
                }, 900);
            }
            
            // Animate ball
            animateBall(targetX, keeperDirection);
        }

        function animateBall(targetX, keeperDirection) {
            const startBottom = 15;
            const startLeft = 50;
            const duration = 800;
            const startTime = Date.now();
            
            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Easing function (ease-out)
                const eased = 1 - Math.pow(1 - progress, 3);
                
                // Calculate position
                const currentLeft = startLeft + (targetX / window.innerWidth * 100) * eased;
                const currentBottom = startBottom + (30 * Math.sin(progress * Math.PI));
                
                elements.ball.style.left = currentLeft + '%';
                elements.ball.style.bottom = currentBottom + '%';
                
                // Scale ball (perspective)
                const scale = 1 - (progress * 0.5);
                elements.ball.style.transform = `translateX(-50%) scale(${scale})`;
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    checkGoal(targetX, keeperDirection);
                }
            }
            
            animate();
        }

        function checkGoal(targetX, keeperDirection) {
            const direction = game.direction;
            const power = game.power;
            
            // Goal logic
            let isGoal = false;
            
            if (keeperDirection === 'left') {
                isGoal = direction > 0.55 && power > 0.3;
            } else if (keeperDirection === 'right') {
                isGoal = direction < 0.45 && power > 0.3;
            } else {
                isGoal = power > 0.6;
            }
            
            // Update game state
            game.attempts--;
            if (isGoal) {
                game.goals++;
                showGoal();
            } else {
                showMiss();
            }
            
            // Update UI
            elements.goals.textContent = game.goals;
            elements.attempts.textContent = game.attempts;
            
            // Check game over
            setTimeout(() => {
                if (game.attempts === 0) {
                    endGame();
                } else {
                    resetKick();
                }
            }, 2000);
        }

        function showGoal() {
            playGoalSound();
            elements.message.textContent = 'ğŸ‰ ×’×•×•×•×•×•×•×œ! ğŸ‰';
            elements.message.classList.add('goal', 'show');
            
            // Particles
            createParticles();
            
            setTimeout(() => {
                elements.message.classList.remove('show');
                setTimeout(() => {
                    elements.message.classList.remove('goal');
                }, 300);
            }, 1500);
        }

        function showMiss() {
            playMissSound();
            elements.message.textContent = 'ğŸ˜… ×¤×¡×¤×¡×ª!';
            elements.message.classList.add('miss', 'show');
            
            setTimeout(() => {
                elements.message.classList.remove('show');
                setTimeout(() => {
                    elements.message.classList.remove('miss');
                }, 300);
            }, 1500);
        }

        function createParticles() {
            const colors = ['#D4AF37', '#FFD700', '#0066CC', '#00AAFF'];
            
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = '50%';
                    particle.style.top = '30%';
                    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                    
                    const angle = Math.random() * Math.PI * 2;
                    const distance = 100 + Math.random() * 200;
                    const x = Math.cos(angle) * distance;
                    const y = Math.sin(angle) * distance;
                    
                    particle.style.setProperty('--x', x + 'px');
                    particle.style.setProperty('--y', y + 'px');
                    
                    elements.particles.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 1000);
                }, i * 30);
            }
        }

        function resetKick() {
            // Reset ball position
            elements.ball.style.left = '50%';
            elements.ball.style.bottom = '15%';
            elements.ball.style.transform = 'translateX(-50%) scale(1)';
            
            // Reset game state
            game.phase = 'ready';
            game.direction = 0.5;
            game.power = 0.5;
            game.directionDirection = 1;
            game.powerDirection = 1;
            
            // Reset UI
            elements.kickButton.disabled = false;
            elements.kickButton.textContent = '×‘×¢×™×˜×”! ğŸ¯';
            elements.directionPanel.style.display = 'none';
            elements.powerPanel.style.display = 'none';
            elements.controls.style.opacity = '1';
            
            updateDirectionMeter();
            updatePowerMeter();
        }

        function endGame() {
            const percentage = (game.goals / 5 * 100).toFixed(0);
            let title, emoji;
            
            if (game.goals === 5) {
                title = '××•×©×œ×! ğŸ†';
                emoji = 'ğŸ‘‘';
            } else if (game.goals >= 3) {
                title = '××¢×•×œ×”! âš½';
                emoji = 'ğŸŒŸ';
            } else {
                title = '× ×¡×” ×©×•×‘! ğŸ’ª';
                emoji = 'ğŸ¯';
            }
            
            elements.message.innerHTML = `
                <div style="font-size: 48px; margin-bottom: 20px;">${emoji}</div>
                <div>${title}</div>
                <div style="font-size: 24px; margin-top: 20px; opacity: 0.8;">
                    ${game.goals} ×’×•×œ×™× ××ª×•×š 5 (${percentage}%)
                </div>
                <div style="font-size: 18px; margin-top: 30px; opacity: 0.6; cursor: pointer;" onclick="location.reload()">
                    ×œ×—×¥ ×›×“×™ ×œ×©×—×§ ×©×•×‘
                </div>
            `;
            elements.message.classList.add('goal', 'show');
            
            playGoalSound();
        }

        // Mobile support
        let touchStartTime = 0;
        document.addEventListener('touchstart', () => {
            touchStartTime = Date.now();
        });

        // Prevent context menu on long press
        document.addEventListener('contextmenu', (e) => {
            if (Date.now() - touchStartTime < 500) {
                e.preventDefault();
            }
        });

        // Screen orientation
        if (screen.orientation && screen.orientation.lock) {
            screen.orientation.lock('landscape').catch(() => {
                // Ignore error if lock not supported
            });
        }
    </script>
</body>
</html>